{"version":3,"sources":["webpack:///webpack/bootstrap c9cc65792e57f2d92689","webpack:///../src/instantiateComponent.js","webpack:///./app.js","webpack:///../qreact.js","webpack:///../src/render.js","webpack:///../src/DOM.js","webpack:///../src/createElement.js","webpack:///../src/Component.js","webpack:///../src/DomComponent.js"],"names":["instantiateComponent","element","type","props","wrapperInstance","setInternalElement","children","stories","name","url","App","constructor","render","map","story","Story","handleClick","setState","likes","state","Math","ceil","random","document","getElementById","DOM_KEY","reactInstances","incrementId","isRendered","node","dataset","mount","update","component","instantiate","DOM","empty","appendChild","getInternalDom","firstChild","removeChild","dom","child","appendChildren","Array","isArray","forEach","createElement","config","Object","assign","length","concat","Component","renderedElement","renderedComponent","_renderedComponent","_element","DomComponent","_domNode","_updateDOMProperties","_createInitialDOMChildren","indexOf","textContent","_renderedChildren","domChildren","prevProps","nextProps","isEvent","startsWith","isAttribute","keys","filter","eventType","toLowerCase","substring","removeEventListener","addEventListener"],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap c9cc65792e57f2d92689","import DomComponent from './DomComponent';\n\nfunction instantiateComponent(element) {\n  const { type, props } = element;\n  let wrapperInstance;\n\n  if (typeof type == 'string') {\n    wrapperInstance = new DomComponent(element);\n  } else if (typeof type == 'function') {\n    wrapperInstance = new type(props);\n    wrapperInstance.setInternalElement = element;\n  } else {\n    wrapperInstance = new DomComponent({\n      type: 'span',\n      props: { children: element }\n    })\n  }\n  return wrapperInstance;\n}\n\nexport default instantiateComponent;\n\n\n// WEBPACK FOOTER //\n// ../src/instantiateComponent.js","import { render, createElement, Component } from '../qreact';\n\nconst stories = [\n  { name: \"[Webpack] — Smart Loading Assets For Production\", url: \"https://hackernoon.com/webpack-smart-loading-assets-for-production-3571e0a29c2e\" },\n  { name: \"V8 Engine Overview\", url: \"https://medium.com/@MQuy90/v8-engine-overview-7c965731ced4\" },\n];\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n  }\n  render() {\n    const { stories } = this.props;\n\n    return (\n      <div>\n        <ul>\n          {\n            stories.map((story) => (\n              <Story story={story} />\n            ))\n          }\n        </ul>\n      </div>\n    );\n  }\n}\n\nclass Story extends Component {\n  constructor(props) {\n    super(props);\n    \n    this.state = { likes: Math.ceil(Math.random() * 100) };\n  }\n  render() {\n    const { story } = this.props;\n    const { likes } = this.state;\n    \n    return (\n      <li>\n        <button onClick={this.handleClick}>{likes}❤️</button>\n        <a href={story.url}>{story.name}</a>\n      </li>\n    );\n  }\n  handleClick = () => {\n    this.setState({\n      likes: this.state.likes + 1\n    })\n  }\n}\n\nrender(<App stories={stories} />, document.getElementById(\"root\"));\n\n\n// WEBPACK FOOTER //\n// ./app.js","import render from './src/render';\nimport createElement from './src/createElement';\nimport Component from './src/Component';\n\nexport {\n  render,\n  createElement,\n  Component,\n}\n\n\n// WEBPACK FOOTER //\n// ../qreact.js","import DOM from './DOM';\nimport instantiateComponent from './instantiateComponent';\n\nconst DOM_KEY = 'QREACT';\nconst reactInstances = {};\nlet incrementId = 0;\n\nfunction isRendered(node) {\n  return node.dataset[DOM_KEY];\n}\n\nfunction render(element, node) {\n  if (!isRendered(node)) {\n    mount(element, node);\n  } else {\n    update(element, node);\n  }\n}\n\nfunction mount(element, node) {\n  node.dataset[DOM_KEY] = incrementId;\n\n  const component = instantiateComponent(element);\n  \n  reactInstances[incrementId] = component;\n  component.instantiate();\n\n  DOM.empty(node);\n  DOM.appendChild(node, component.getInternalDom());\n\n  incrementId++;\n}\n\nexport default render;\n\n\n// WEBPACK FOOTER //\n// ../src/render.js","function empty(node) {\n  while (node.firstChild) {\n    node.removeChild(node.firstChild);\n  }\n}\n\nfunction appendChild(dom, child) {\n  dom.appendChild(child);\n}\n\nfunction appendChildren(node, children) {\n  if (Array.isArray(children)) {\n    children.forEach(child => appendChild(node, child));\n  } else {\n    appendChild(node, children);\n  }\n}\n\nexport default {\n  empty,\n  appendChild,\n  appendChildren,\n}\n\n\n// WEBPACK FOOTER //\n// ../src/DOM.js","function createElement(type, config, ...children) {\n  const props = Object.assign({}, config);\n\n  if (children.length > 0) {\n    props.children = [].concat(...children);\n  }\n\n  return { type, props };\n}\n\nexport default createElement;\n\n\n// WEBPACK FOOTER //\n// ../src/createElement.js","import instantiateComponent from './instantiateComponent';\n\nclass Component {\n  constructor(props) {\n    this.props = props;\n    this.state = {};\n  }\n  instantiate() {\n    const renderedElement = this.render();\n    const renderedComponent = instantiateComponent(renderedElement);\n\n    this._renderedComponent = renderedComponent;\n    renderedComponent.instantiate();\n  }\n  getInternalDom() {\n    return this._renderedComponent.getInternalDom();\n  }\n  setInternalElement(element) {\n    this._element = element;\n  }\n}\n\nexport default Component;\n\n\n// WEBPACK FOOTER //\n// ../src/Component.js","import DOM from './DOM';\nimport instantiateComponent from './instantiateComponent';\n\nclass DomComponent {\n  constructor(element) {\n    this._element = element;\n    this._domNode = null;\n  }\n  instantiate() {\n    const { type, props } = this._element;\n\n    this._domNode = document.createElement(type);\n    this._updateDOMProperties({}, props);\n    this._createInitialDOMChildren(props);\n\n    return this;\n  }\n  getInternalDom() {\n    return this._domNode;\n  }\n  _createInitialDOMChildren(props) {\n    const { children } = props;\n\n    if (['string', 'number'].indexOf(typeof children) !== -1) {\n      this._domNode.textContent = children;\n    } else {\n      this._renderedChildren = children.map((child) => instantiateComponent(child));\n      this._renderedChildren.forEach((child) => child.instantiate());\n\n      const domChildren = this._renderedChildren.map((child) => child.getInternalDom());\n\n      DOM.appendChildren(this._domNode, domChildren);\n    }\n  }\n  _updateDOMProperties(prevProps, nextProps) {\n    const isEvent = name => name.startsWith(\"on\");\n    const isAttribute = name =>\n      !isEvent(name) && name != \"children\" && name != \"style\";\n\n    Object.keys(prevProps)\n    .filter(isEvent)\n    .forEach(name => {\n      const eventType = name.toLowerCase().substring(2);\n      this._domNode.removeEventListener(eventType, prevProps[name]);\n    });\n\n    Object.keys(prevProps)\n      .filter(isAttribute)\n      .forEach(name => {\n        this._domNode[name] = null;\n      });\n\n    Object.keys(nextProps)\n      .filter(isAttribute)\n      .forEach(name => {\n        this._domNode[name] = nextProps[name];\n      });\n\n    Object.keys(nextProps)\n      .filter(isEvent)\n      .forEach(name => {\n        const eventType = name.toLowerCase().substring(2);\n        this._domNode.addEventListener(eventType, nextProps[name]);\n      });\n  }\n}\n\nexport default DomComponent;\n\n\n// WEBPACK FOOTER //\n// ../src/DomComponent.js"],"sourceRoot":""}